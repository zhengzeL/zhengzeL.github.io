<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='安装Docker 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 # 1. 卸载旧的版本 yum remove docker \ docker-client \ docker-client-latest \ docker-common \ docker-latest \ docker-latest-logrotate \ docker-logrotate \ docker-engine # 2. 需要的'>
<title>Docker入门</title>

<link rel='canonical' href='https://zhengzel.github.io/p/docker%E5%85%A5%E9%97%A8/'>

<link rel="stylesheet" href="/scss/style.min.5be32ca3f6e1a997c75795c4359147cc6d4fbd34948c0acd51e31d237033978a.css"><meta property='og:title' content='Docker入门'>
<meta property='og:description' content='安装Docker 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 # 1. 卸载旧的版本 yum remove docker \ docker-client \ docker-client-latest \ docker-common \ docker-latest \ docker-latest-logrotate \ docker-logrotate \ docker-engine # 2. 需要的'>
<meta property='og:url' content='https://zhengzel.github.io/p/docker%E5%85%A5%E9%97%A8/'>
<meta property='og:site_name' content='Satan的博客'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:published_time' content='2023-01-10T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2023-01-10T00:00:00&#43;00:00'/><meta property='og:image' content='https://zhengzel.github.io/p/docker%E5%85%A5%E9%97%A8/background.jpg' />
<meta name="twitter:title" content="Docker入门">
<meta name="twitter:description" content="安装Docker 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 # 1. 卸载旧的版本 yum remove docker \ docker-client \ docker-client-latest \ docker-common \ docker-latest \ docker-latest-logrotate \ docker-logrotate \ docker-engine # 2. 需要的"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://zhengzel.github.io/p/docker%E5%85%A5%E9%97%A8/background.jpg' />
    <link rel="shortcut icon" href="/img/favicon.ico" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="切换菜单">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu645dd4f5308377f2bea8e103414abae3_106468_300x0_resize_q75_box.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">🍥</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Satan的博客</a></h1>
            <h2 class="site-description">回忆中的昨天没有遗憾！</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/zhengzeL'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>主页</span>
            </a>
        </li>
        
        
        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>归档</span>
            </a>
        </li>
        
        
        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>搜索</span>
            </a>
        </li>
        
        
        <li >
            <a href='/%E5%8F%8B%E9%93%BE/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>友链</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>暗色模式</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">目录</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#安装docker">安装Docker</a></li>
    <li><a href="#卸载docker">卸载Docker</a></li>
    <li><a href="#阿里云镜像加速">阿里云镜像加速</a>
      <ol>
        <li><a href="#登录阿里云找到容器服务">登录阿里云找到容器服务</a></li>
        <li><a href="#找到镜像加速地址">找到镜像加速地址</a></li>
      </ol>
    </li>
    <li><a href="#docker为什么比vm快">Docker为什么比vm快</a></li>
    <li><a href="#run流程">Run流程</a></li>
    <li><a href="#docker----帮助命令">Docker &ndash; 帮助命令</a></li>
    <li><a href="#docker----镜像命令">Docker &ndash; 镜像命令</a>
      <ol>
        <li><a href="#查看镜像">查看镜像</a></li>
        <li><a href="#搜索镜像">搜索镜像</a></li>
        <li><a href="#下载镜像">下载镜像</a></li>
        <li><a href="#删除镜像">删除镜像</a></li>
      </ol>
    </li>
    <li><a href="#docker----容器命令">Docker &ndash; 容器命令</a>
      <ol>
        <li><a href="#创建容器">创建容器</a></li>
        <li><a href="#查看容器">查看容器</a></li>
        <li><a href="#退出容器">退出容器</a></li>
        <li><a href="#删除容器">删除容器</a></li>
        <li><a href="#启动容器">启动容器</a></li>
      </ol>
    </li>
    <li><a href="#常用的其他命令">常用的其他命令</a>
      <ol>
        <li><a href="#后台启动容器">后台启动容器</a></li>
        <li><a href="#查看日志">查看日志</a></li>
        <li><a href="#查看容器中进程信息">查看容器中进程信息</a></li>
        <li><a href="#查看镜像的元数据">查看镜像的元数据</a></li>
        <li><a href="#进入当前正在运行的容器">进入当前正在运行的容器</a></li>
        <li><a href="#从容器内拷贝文件到主机上">从容器内拷贝文件到主机上</a></li>
      </ol>
    </li>
    <li><a href="#部署nginx">部署Nginx</a>
      <ol>
        <li><a href="#搜索镜像-1">搜索镜像</a></li>
        <li><a href="#下载镜像-1">下载镜像</a></li>
        <li><a href="#运行测试">运行测试</a></li>
        <li><a href="#进入容器">进入容器</a></li>
      </ol>
    </li>
    <li><a href="#部署tomcat">部署tomcat</a></li>
    <li><a href="#部署eskibana">部署ES+Kibana</a></li>
    <li><a href="#可视化工具">可视化工具</a>
      <ol>
        <li><a href="#portainer">Portainer</a></li>
      </ol>
    </li>
    <li><a href="#docker镜像详解">Docker镜像详解</a>
      <ol>
        <li><a href="#镜像是什么">镜像是什么</a></li>
        <li><a href="#docker镜像加载原理">Docker镜像加载原理</a></li>
      </ol>
    </li>
    <li><a href="#分层理解">分层理解</a></li>
    <li><a href="#commit镜像">commit镜像</a></li>
    <li><a href="#容器数据卷">容器数据卷</a>
      <ol>
        <li><a href="#什么是容器数据卷">什么是容器数据卷</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/p/docker%E5%85%A5%E9%97%A8/">
                <img src="/p/docker%E5%85%A5%E9%97%A8/background_hucc033844cac59f8990265f7eb0b951ce_195342_800x0_resize_q75_box.jpg"
                        srcset="/p/docker%E5%85%A5%E9%97%A8/background_hucc033844cac59f8990265f7eb0b951ce_195342_800x0_resize_q75_box.jpg 800w, /p/docker%E5%85%A5%E9%97%A8/background_hucc033844cac59f8990265f7eb0b951ce_195342_1600x0_resize_q75_box.jpg 1600w"
                        width="800" 
                        height="600" 
                        loading="lazy"
                        alt="Featured image of post Docker入门" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E6%8A%80%E6%9C%AF/" style="background-color: #2a9d8f; color: #fff;">
                技术
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/docker%E5%85%A5%E9%97%A8/">Docker入门</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Jan 10, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    阅读时长: 10 分钟
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <h2 id="安装docker">安装Docker</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 1. 卸载旧的版本</span>
</span></span><span class="line"><span class="cl">yum remove docker <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-client <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-client-latest <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-common <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-latest <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-latest-logrotate <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-logrotate <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>                  docker-engine
</span></span><span class="line"><span class="cl">                  
</span></span><span class="line"><span class="cl"><span class="c1"># 2. 需要的安装包</span>
</span></span><span class="line"><span class="cl">yum install -y yum-utils
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3. 设置镜像的仓库</span>
</span></span><span class="line"><span class="cl">yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4. 更新yum软件包索引</span>
</span></span><span class="line"><span class="cl">yum makecache fast
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 5. 安装docker相关的依赖</span>
</span></span><span class="line"><span class="cl">yum install docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 6. 启动docker</span>
</span></span><span class="line"><span class="cl">systemctl start docker
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 7. 使用docker version查看是否安装成功</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 8. Hello world</span>
</span></span><span class="line"><span class="cl">docker run hello-world
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 9. 查看一下下载的这个hello-world镜像</span>
</span></span><span class="line"><span class="cl">docker images
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="卸载docker">卸载Docker</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 1. 卸载依赖</span>
</span></span><span class="line"><span class="cl">yum remove docker-ce docker-ce-cli containerd.io docker-compose-plugin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 2. 删除资源</span>
</span></span><span class="line"><span class="cl">rm -rf /var/lib/docker <span class="c1"># docker的默认工作路径</span>
</span></span><span class="line"><span class="cl">rm -rf /var/lib/containerd
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="阿里云镜像加速">阿里云镜像加速</h2>
<h3 id="登录阿里云找到容器服务">登录阿里云找到容器服务</h3>
<p><img src="/p/docker%E5%85%A5%E9%97%A8/aliyun.png"
	width="1217"
	height="934"
	srcset="/p/docker%E5%85%A5%E9%97%A8/aliyun_hudeb1b0821b3c63fee79ee56461982422_112704_480x0_resize_box_3.png 480w, /p/docker%E5%85%A5%E9%97%A8/aliyun_hudeb1b0821b3c63fee79ee56461982422_112704_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="130"
		data-flex-basis="312px"
	
></p>
<h3 id="找到镜像加速地址">找到镜像加速地址</h3>
<p><img src="/p/docker%E5%85%A5%E9%97%A8/address.png"
	width="795"
	height="811"
	srcset="/p/docker%E5%85%A5%E9%97%A8/address_hu6c970d286e2e16985ce048bb1a1138a1_51367_480x0_resize_box_3.png 480w, /p/docker%E5%85%A5%E9%97%A8/address_hu6c970d286e2e16985ce048bb1a1138a1_51367_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="98"
		data-flex-basis="235px"
	
></p>
<h2 id="docker为什么比vm快">Docker为什么比vm快</h2>
<ul>
<li>
<p>Docker有着比虚拟机更少的抽象层</p>
</li>
<li>
<p>docker利用的是宿主机的内核，vm需要的是Guest OS</p>
<p><img src="/p/docker%E5%85%A5%E9%97%A8/vm&amp;docker.png"
	width="653"
	height="381"
	srcset="/p/docker%E5%85%A5%E9%97%A8/vm&amp;docker_hu70f9026d4bef334a39c76de46fdf8b38_106987_480x0_resize_box_3.png 480w, /p/docker%E5%85%A5%E9%97%A8/vm&amp;docker_hu70f9026d4bef334a39c76de46fdf8b38_106987_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="171"
		data-flex-basis="411px"
	
></p>
</li>
</ul>
<h2 id="run流程">Run流程</h2>
<p><img src="/p/docker%E5%85%A5%E9%97%A8/process.png"
	width="1081"
	height="599"
	srcset="/p/docker%E5%85%A5%E9%97%A8/process_hude421193b368040d81dbf185ebf42aa4_67439_480x0_resize_box_3.png 480w, /p/docker%E5%85%A5%E9%97%A8/process_hude421193b368040d81dbf185ebf42aa4_67439_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="180"
		data-flex-basis="433px"
	
></p>
<h2 id="docker----帮助命令">Docker &ndash; 帮助命令</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker version	    <span class="c1"># 显示docker的版本信息</span>
</span></span><span class="line"><span class="cl">docker info         <span class="c1"># 显示docker的系统信息，包括镜像和容器的数量</span>
</span></span><span class="line"><span class="cl">docker 命令 --help   <span class="c1"># 万能命令 帮助命令</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><a class="link" href="https://docs.docker.com/reference/"  target="_blank" rel="noopener"
    >docker命令文档</a></p>
</blockquote>
<h2 id="docker----镜像命令">Docker &ndash; 镜像命令</h2>
<h3 id="查看镜像">查看镜像</h3>
<blockquote>
<p>docker images    #查看所有本地的主机上的镜像</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker images</span>
</span></span><span class="line"><span class="cl">REPOSITORY    TAG       IMAGE ID       CREATED         SIZE
</span></span><span class="line"><span class="cl">hello-world   latest    feb5d9fea6a5   <span class="m">15</span> months ago   13.3kB
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 解释</span>
</span></span><span class="line"><span class="cl">REPOSITORY   镜像的仓库源
</span></span><span class="line"><span class="cl">TAG          镜像的标签
</span></span><span class="line"><span class="cl">IMAGE ID     镜像的id
</span></span><span class="line"><span class="cl">CREATED      镜像的创建时间
</span></span><span class="line"><span class="cl">SIZE         镜像的大小
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="搜索镜像">搜索镜像</h3>
<blockquote>
<p>docker search 镜像名称</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker search mysql</span>
</span></span><span class="line"><span class="cl">NAME      DESCRIPTION               STARS     OFFICIAL   AUTOMATED
</span></span><span class="line"><span class="cl">mysql     MySQL is a widely used    <span class="m">13681</span>     <span class="o">[</span>OK<span class="o">]</span>       
</span></span><span class="line"><span class="cl">mariadb   MariaDB Server is a high  <span class="m">5225</span>      <span class="o">[</span>OK<span class="o">]</span>   
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 可选项 过滤条件</span>
</span></span><span class="line"><span class="cl">--filter<span class="o">=</span><span class="nv">STARS</span><span class="o">=</span><span class="m">3000</span>  <span class="c1"># 搜索出来的镜像的STARS大于3000的</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="下载镜像">下载镜像</h3>
<blockquote>
<p>docker pull 镜像名称</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker pull mysql[:tag]  可选项 tag 指定版本   </span>
</span></span><span class="line"><span class="cl">Using default tag: latest
</span></span><span class="line"><span class="cl">latest: Pulling from library/mysql
</span></span><span class="line"><span class="cl">72a69066d2fe: Pull <span class="nb">complete</span> <span class="c1"># 分层下载，docker镜像的核心</span>
</span></span><span class="line"><span class="cl">93619dbc5b36: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">99da31dd6142: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">626033c43d70: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">37d5d7efb64e: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">ac563158d721: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">d2ba16033dad: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">688ba7d5c01a: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">00e060b6d11d: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">1c04857f594f: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">4d7cfa90e6ea: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">e0431212d27d: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">Digest: sha256:e9027fe4d91c0153429607251656806cc784e914937271037f7738bd5b8e7709
</span></span><span class="line"><span class="cl">Status: Downloaded newer image <span class="k">for</span> mysql:latest
</span></span><span class="line"><span class="cl">docker.io/library/mysql:latest
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="删除镜像">删除镜像</h3>
<blockquote>
<p>docker rmi 镜像ID  #删除指定镜像</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker rmi -f c20987f18b13</span>
</span></span><span class="line"><span class="cl">Untagged: mysql:5.7
</span></span><span class="line"><span class="cl">Untagged: mysql@sha256:f2ad209efe9c67104167fc609cca6973c8422939491c9345270175a300419f94
</span></span><span class="line"><span class="cl">Deleted: sha256:c20987f18b130f9d144c9828df630417e2a9523148930dc3963e9d0dab302a76
</span></span><span class="line"><span class="cl">Deleted: sha256:6567396b065ee734fb2dbb80c8923324a778426dfd01969f091f1ab2d52c7989
</span></span><span class="line"><span class="cl">Deleted: sha256:0910f12649d514b471f1583a16f672ab67e3d29d9833a15dc2df50dd5536e40f
</span></span><span class="line"><span class="cl">Deleted: sha256:6682af2fb40555c448b84711c7302d0f86fc716bbe9c7dc7dbd739ef9d757150
</span></span><span class="line"><span class="cl">Deleted: sha256:5c062c3ac20f576d24454e74781511a5f96739f289edaadf2de934d06e910b92
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除多个镜像</span>
</span></span><span class="line"><span class="cl">docker rmi -f 镜像id 镜像id 镜像id 镜像id
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除所有镜像</span>
</span></span><span class="line"><span class="cl">docker rmi -f <span class="k">$(</span>docker images -aq<span class="k">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="docker----容器命令">Docker &ndash; 容器命令</h2>
<blockquote>
<p>说明： 有了镜像才可以创建容器，所以先下载一个centos镜像来测试学习</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">docker pull centos
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="创建容器">创建容器</h3>
<blockquote>
<p>docker run [可选参数] image 启动容器</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 新建容器并启动</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">docker run <span class="o">[</span>可选参数<span class="o">]</span> image
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 可选参数说明</span>
</span></span><span class="line"><span class="cl">--name<span class="o">=</span><span class="s1">&#39;Name&#39;</span>   容器名字 tomcat01/tomcat02 用来区分容器
</span></span><span class="line"><span class="cl">-d              后台方式运行
</span></span><span class="line"><span class="cl">-it             使用交互方式运行，进入容器查看内容
</span></span><span class="line"><span class="cl">-p              指定容器的端口 -p
</span></span><span class="line"><span class="cl">  -p ip:主机端口：容器端口
</span></span><span class="line"><span class="cl">  -p 主机端口：容器端口
</span></span><span class="line"><span class="cl">  -p 容器端口
</span></span><span class="line"><span class="cl">-P              随机指定端口
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 测试，启动并进入容器</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker run -it centos /bin/bash</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@2913f3a8c3b9 /<span class="o">]</span><span class="c1"># ls 查看容器内的centos</span>
</span></span><span class="line"><span class="cl">bin  etc   lib    lost+found  mnt  proc  run   srv  tmp  var
</span></span><span class="line"><span class="cl">dev  home  lib64  media       opt  root  sbin  sys  usr
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="查看容器">查看容器</h3>
<blockquote>
<p>docker ps   # 查看当前正在运行中的容器</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker /<span class="o">]</span><span class="c1"># docker ps  </span>
</span></span><span class="line"><span class="cl">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 可选参数说明</span>
</span></span><span class="line"><span class="cl">-a   <span class="c1"># 查看所有的容器，包括未运行的容器</span>
</span></span><span class="line"><span class="cl">-n<span class="o">=</span>? <span class="c1"># 显示最近创建的容器，？为显示个数</span>
</span></span><span class="line"><span class="cl">-q   <span class="c1"># 只显示容器的编号</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="退出容器">退出容器</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 直接停止容器并退出</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@2913f3a8c3b9 /<span class="o">]</span><span class="c1"># exit</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 容器不停止退出</span>
</span></span><span class="line"><span class="cl">Ctrl + P + Q
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="删除容器">删除容器</h3>
<blockquote>
<p>docker rm 容器ID  # 删除指定容器，不能删除正在运行的容器</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker /<span class="o">]</span><span class="c1"># docker ps -aq</span>
</span></span><span class="line"><span class="cl">8f6cded1de29
</span></span><span class="line"><span class="cl">2913f3a8c3b9
</span></span><span class="line"><span class="cl">1e9519071c11
</span></span><span class="line"><span class="cl">38e22de26669
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker /<span class="o">]</span><span class="c1"># docker rm 8f6cded1de29</span>
</span></span><span class="line"><span class="cl">8f6cded1de29
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker /<span class="o">]</span><span class="c1"># docker ps -aq         </span>
</span></span><span class="line"><span class="cl">2913f3a8c3b9
</span></span><span class="line"><span class="cl">1e9519071c11
</span></span><span class="line"><span class="cl">38e22de26669
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 删除所有容器</span>
</span></span><span class="line"><span class="cl">docker rm -f <span class="k">$(</span>docker ps -aq<span class="k">)</span>
</span></span><span class="line"><span class="cl">docker ps -a -q<span class="p">|</span>xargs docker rm
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="启动容器">启动容器</h3>
<blockquote>
<p>docker start 容器id</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 补充</span>
</span></span><span class="line"><span class="cl">docker restart 容器id  <span class="c1"># 重启容器</span>
</span></span><span class="line"><span class="cl">docker stop 容器id     <span class="c1"># 停止当前正在运行的容器</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">kill</span> 容器id     <span class="c1"># 强制停止当前容器</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="常用的其他命令">常用的其他命令</h2>
<h3 id="后台启动容器">后台启动容器</h3>
<blockquote>
<p>docker run -d 镜像名</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker /<span class="o">]</span><span class="c1"># docker run -d centos</span>
</span></span><span class="line"><span class="cl">eddc149d6e24582c1d8fe356f2d9559215f683ee10108fbeb4e4db435f7a3355
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker /<span class="o">]</span><span class="c1"># docker ps</span>
</span></span><span class="line"><span class="cl">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 问题 docker ps 发现 centos 停止了</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 常见的坑： docker 容器使用后台运行  就必须有一个前台进程,docker发现没有应用，就会自动停止</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="查看日志">查看日志</h3>
<blockquote>
<p>docker logs</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 显示日志</span>
</span></span><span class="line"><span class="cl">-tf            <span class="c1"># 显示日志</span>
</span></span><span class="line"><span class="cl">--tail number  <span class="c1"># 要显示的日志条数</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker /<span class="o">]</span><span class="c1"># docker logs -tf --tail 10 容器id</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="查看容器中进程信息">查看容器中进程信息</h3>
<blockquote>
<p>docker top 容器id</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker /<span class="o">]</span><span class="c1"># docker top e4a8c1e80579</span>
</span></span><span class="line"><span class="cl">UID      PID     PPID   C     STIME   TTY      TIME        CMD
</span></span><span class="line"><span class="cl">root     <span class="m">2942</span>    <span class="m">2923</span>   <span class="m">0</span>     16:02  pts/0   00:00:00   /bin/bash
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="查看镜像的元数据">查看镜像的元数据</h3>
<blockquote>
<p>docker inspect 容器id</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@d6e2d66837c2 /<span class="o">]</span><span class="c1"># [root@docker /]# docker ps</span>
</span></span><span class="line"><span class="cl">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES
</span></span><span class="line"><span class="cl">d6e2d66837c2   centos    <span class="s2">&#34;/bin/bash&#34;</span>   <span class="m">12</span> seconds ago   Up <span class="m">11</span> seconds             thirsty_rhodes
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker /<span class="o">]</span><span class="c1"># docker inspect d6e2d66837c2</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>
</span></span><span class="line"><span class="cl">    <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Id&#34;</span>: <span class="s2">&#34;d6e2d66837c219ba3250c0f45ed984cdc6dd21c8cd23372f36dac3d65dd2e981&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Created&#34;</span>: <span class="s2">&#34;2023-01-12T08:38:21.597122836Z&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Path&#34;</span>: <span class="s2">&#34;/bin/bash&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;Args&#34;</span>: <span class="o">[]</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;State&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Status&#34;</span>: <span class="s2">&#34;running&#34;</span>,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Running&#34;</span>: true,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Paused&#34;</span>: false,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Restarting&#34;</span>: false,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;OOMKilled&#34;</span>: false,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Dead&#34;</span>: false,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Pid&#34;</span>: 3243,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;ExitCode&#34;</span>: 0,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;Error&#34;</span>: <span class="s2">&#34;&#34;</span>,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;StartedAt&#34;</span>: <span class="s2">&#34;2023-01-12T08:38:21.896883638Z&#34;</span>,
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;FinishedAt&#34;</span>: <span class="s2">&#34;0001-01-01T00:00:00Z&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="o">}</span>,
</span></span><span class="line"><span class="cl"><span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="进入当前正在运行的容器">进入当前正在运行的容器</h3>
<blockquote>
<p>我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 我们通常容器都是使用后台方式运行的，需要进入容器，修改一些配置</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 进入容器方式一</span>
</span></span><span class="line"><span class="cl">docker <span class="nb">exec</span> -it 容器id bashShell
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 进入容器方式二</span>
</span></span><span class="line"><span class="cl">docker attach 容器id
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># docker exec     # 进入容器后开启一个新的终端，可以在里面操作</span>
</span></span><span class="line"><span class="cl"><span class="c1"># docker attach   # 进入容器正在执行的终端</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="从容器内拷贝文件到主机上">从容器内拷贝文件到主机上</h3>
<blockquote>
<p>docker cp 容器id:容器内路径   目标的主机路径</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 查看home目录下，此时home目录下只有admin</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># cd /home</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker home<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl">admin
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 启动docker</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker home<span class="o">]</span><span class="c1"># systemctl start docker</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 当前的镜像</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker home<span class="o">]</span><span class="c1"># docker images</span>
</span></span><span class="line"><span class="cl">REPOSITORY   TAG       IMAGE ID       CREATED         SIZE
</span></span><span class="line"><span class="cl">centos       latest    5d0da3dc9764   <span class="m">16</span> months ago   231MB
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 新建一个容器并启动</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker home<span class="o">]</span><span class="c1"># docker run -it centos /bin/bash</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 进入docker容器内部</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@47b3a0402593 /<span class="o">]</span><span class="c1"># [root@docker home]# docker ps</span>
</span></span><span class="line"><span class="cl">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES
</span></span><span class="line"><span class="cl">47b3a0402593   centos    <span class="s2">&#34;/bin/bash&#34;</span>   <span class="m">48</span> seconds ago   Up <span class="m">47</span> seconds             dreamy_cerf
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker home<span class="o">]</span><span class="c1"># docker attach 47b3a0402593</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@47b3a0402593 /<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@47b3a0402593 /<span class="o">]</span><span class="c1"># cd /home</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@47b3a0402593 home<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 在容器的home目录内新建一个文件</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@47b3a0402593 home<span class="o">]</span><span class="c1"># touch test.java</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@47b3a0402593 home<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl">test.java
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@47b3a0402593 home<span class="o">]</span><span class="c1"># exit</span>
</span></span><span class="line"><span class="cl"><span class="nb">exit</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker home<span class="o">]</span><span class="c1"># docker ps</span>
</span></span><span class="line"><span class="cl">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker home<span class="o">]</span><span class="c1"># docker ps -a</span>
</span></span><span class="line"><span class="cl">CONTAINER ID   IMAGE          COMMAND       CREATED        STATUS                      PORTS     NAMES
</span></span><span class="line"><span class="cl">47b3a0402593   centos         <span class="s2">&#34;/bin/bash&#34;</span>   <span class="m">2</span> hours ago    Exited <span class="o">(</span>0<span class="o">)</span> <span class="m">32</span> seconds ago             dreamy_cerf
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 将文件拷贝到虚拟机上的home目录</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker home<span class="o">]</span><span class="c1"># docker cp 47b3a0402593:/home/test.java /home</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker home<span class="o">]</span><span class="c1"># ls</span>
</span></span><span class="line"><span class="cl">admin  test.java
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="部署nginx">部署Nginx</h2>
<h3 id="搜索镜像-1">搜索镜像</h3>
<blockquote>
<p>docker search nginx 或者 在 docker Hub上搜索，可以看到帮助文档</p>
</blockquote>
<p><img src="/p/docker%E5%85%A5%E9%97%A8/nginx.png"
	width="1328"
	height="169"
	srcset="/p/docker%E5%85%A5%E9%97%A8/nginx_hu09dc40bb540ea76b6796cbbc04272d25_16188_480x0_resize_box_3.png 480w, /p/docker%E5%85%A5%E9%97%A8/nginx_hu09dc40bb540ea76b6796cbbc04272d25_16188_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="785"
		data-flex-basis="1885px"
	
></p>
<h3 id="下载镜像-1">下载镜像</h3>
<blockquote>
<p>docker pull nginx</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker pull nginx</span>
</span></span><span class="line"><span class="cl">Using default tag: latest
</span></span><span class="line"><span class="cl">latest: Pulling from library/nginx
</span></span><span class="line"><span class="cl">a2abf6c4d29d: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">a9edb18cadd1: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">589b7251471a: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">186b1aaa4aa6: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">b4df32aa5a72: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">a0bcbecc962e: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">Digest: sha256:0d17b565c37bcbd895e9d92315a05c1c3c9a29f762b011a10c54a66cd53c9b31
</span></span><span class="line"><span class="cl">Status: Downloaded newer image <span class="k">for</span> nginx:latest
</span></span><span class="line"><span class="cl">docker.io/library/nginx:latest
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="运行测试">运行测试</h3>
<blockquote>
<p>docker run -d &ndash;name nginx -p 3344:80 nginx</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker images</span>
</span></span><span class="line"><span class="cl">REPOSITORY   TAG       IMAGE ID       CREATED         SIZE
</span></span><span class="line"><span class="cl">nginx        latest    605c77e624dd   <span class="m">12</span> months ago   141MB
</span></span><span class="line"><span class="cl">centos       latest    5d0da3dc9764   <span class="m">16</span> months ago   231MB
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 参数说明</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -d 后台运行</span>
</span></span><span class="line"><span class="cl"><span class="c1"># --name 给容器命名</span>
</span></span><span class="line"><span class="cl"><span class="c1"># -p 端口暴露 宿主机端口：容器内端口</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker run -d --name nginx -p 3344:80 nginx </span>
</span></span><span class="line"><span class="cl">e25907b771ccef91c5e34472a1865c007eba33606a0acb4d738efad0ca72dc61
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># curl localhost:3344</span>
</span></span><span class="line"><span class="cl">&lt;!DOCTYPE html&gt;
</span></span><span class="line"><span class="cl">&lt;html&gt;
</span></span><span class="line"><span class="cl">&lt;head&gt;
</span></span><span class="line"><span class="cl">&lt;title&gt;Welcome to nginx!&lt;/title&gt;
</span></span><span class="line"><span class="cl">&lt;style&gt;
</span></span><span class="line"><span class="cl">html <span class="o">{</span> color-scheme: light dark<span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">body <span class="o">{</span> width: 35em<span class="p">;</span> margin: <span class="m">0</span> auto<span class="p">;</span>
</span></span><span class="line"><span class="cl">font-family: Tahoma, Verdana, Arial, sans-serif<span class="p">;</span> <span class="o">}</span>
</span></span><span class="line"><span class="cl">&lt;/style&gt;
</span></span><span class="line"><span class="cl">&lt;/head&gt;
</span></span><span class="line"><span class="cl">&lt;body&gt;
</span></span><span class="line"><span class="cl">&lt;h1&gt;Welcome to nginx!&lt;/h1&gt;
</span></span><span class="line"><span class="cl">&lt;p&gt;If you see this page, the nginx web server is successfully installed and
</span></span><span class="line"><span class="cl">working. Further configuration is required.&lt;/p&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;p&gt;For online documentation and support please refer to
</span></span><span class="line"><span class="cl">&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;http://nginx.org/&#34;</span>&gt;nginx.org&lt;/a&gt;.&lt;br/&gt;
</span></span><span class="line"><span class="cl">Commercial support is available at
</span></span><span class="line"><span class="cl">&lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&#34;http://nginx.com/&#34;</span>&gt;nginx.com&lt;/a&gt;.&lt;/p&gt;
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">&lt;p&gt;&lt;em&gt;Thank you <span class="k">for</span> using nginx.&lt;/em&gt;&lt;/p&gt;
</span></span><span class="line"><span class="cl">&lt;/body&gt;
</span></span><span class="line"><span class="cl">&lt;/html&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="进入容器">进入容器</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker exec -it nginx /bin/bash</span>
</span></span><span class="line"><span class="cl">root@e25907b771cc:/# whereis nginx
</span></span><span class="line"><span class="cl">nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/share/nginx
</span></span><span class="line"><span class="cl">root@e25907b771cc:/# <span class="nb">cd</span> /etc/nginx
</span></span><span class="line"><span class="cl">root@e25907b771cc:/etc/nginx# ls
</span></span><span class="line"><span class="cl">conf.d  fastcgi_params  mime.types  modules  nginx.conf  scgi_params  uwsgi_params
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="部署tomcat">部署tomcat</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 官方的使用</span>
</span></span><span class="line"><span class="cl">docker run -it --rm tomcat:9.0
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 我们之前的启动都是后台，停止了容器之后，容器还是可以查到</span>
</span></span><span class="line"><span class="cl"><span class="c1"># docker run -it --rm一般用来测试，用完即删</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 1.下载镜像</span>
</span></span><span class="line"><span class="cl"><span class="c1"># docker pull tomcat:9.0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 2.启动运行</span>
</span></span><span class="line"><span class="cl"><span class="c1"># docker run -d --name tomcat -p 3355:8080 tomcat:9.0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 3.测试访问没有问题，但是报404错误，进入容器，一探究竟</span>
</span></span><span class="line"><span class="cl"><span class="c1"># docker exec -it tomcat /bin/bash</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 4.发现问题</span>
</span></span><span class="line"><span class="cl">root@bc6aaf2c5773:/usr/local/tomcat# ll                 <span class="c1"># linux命令缺失</span>
</span></span><span class="line"><span class="cl">bash: ll: <span class="nb">command</span> not found
</span></span><span class="line"><span class="cl">root@bc6aaf2c5773:/usr/local/tomcat# <span class="nb">cd</span> webapps/
</span></span><span class="line"><span class="cl">root@bc6aaf2c5773:/usr/local/tomcat/webapps# ls
</span></span><span class="line"><span class="cl">root@bc6aaf2c5773:/usr/local/tomcat/webapps#            <span class="c1"># webapps目录下为空</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 5.原因：阿里云镜像，默认是最小的镜像，所有不必要都剔除掉，保证最小可运行环境</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 6.解决方式 webapps目录下的文件可以从webapps.dist文件下拷贝</span>
</span></span><span class="line"><span class="cl">root@bc6aaf2c5773:/usr/local/tomcat# cp -r webapps.dist/* webapps
</span></span><span class="line"><span class="cl">root@bc6aaf2c5773:/usr/local/tomcat# <span class="nb">cd</span> webapps
</span></span><span class="line"><span class="cl">root@bc6aaf2c5773:/usr/local/tomcat/webapps# ls
</span></span><span class="line"><span class="cl">ROOT  docs  examples  host-manager  manager
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 7.ip+端口访问，发现能正常看到页面了</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="部署eskibana">部署ES+Kibana</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 启动 Elasticsearch，若没有这个镜像则会下载下来</span>
</span></span><span class="line"><span class="cl">docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e <span class="s2">&#34;discovery.type=single-node&#34;</span> elasticsearch:7.6.2
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>问题，ES比较占内存,所以一核2G的配置很卡，CPU占用大，所以在测试通过后，尽快关闭，解决这个问题</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 说明ES安装成功</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># curl localhost:9200</span>
</span></span><span class="line"><span class="cl"><span class="o">{</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;name&#34;</span> : <span class="s2">&#34;08145df3cc6e&#34;</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;cluster_name&#34;</span> : <span class="s2">&#34;docker-cluster&#34;</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;cluster_uuid&#34;</span> : <span class="s2">&#34;td15eI9XTp-yIObP-XKP4w&#34;</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;version&#34;</span> : <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;number&#34;</span> : <span class="s2">&#34;7.6.2&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;build_flavor&#34;</span> : <span class="s2">&#34;default&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;build_type&#34;</span> : <span class="s2">&#34;docker&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;build_hash&#34;</span> : <span class="s2">&#34;ef48eb35cf30adf4db14086e8aabd07ef6fb113f&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;build_date&#34;</span> : <span class="s2">&#34;2020-03-26T06:34:37.794943Z&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;build_snapshot&#34;</span> : false,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;lucene_version&#34;</span> : <span class="s2">&#34;8.4.0&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;minimum_wire_compatibility_version&#34;</span> : <span class="s2">&#34;6.8.0&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;minimum_index_compatibility_version&#34;</span> : <span class="s2">&#34;6.0.0-beta1&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="o">}</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;tagline&#34;</span> : <span class="s2">&#34;You Know, for Search&#34;</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 使用docker stats查看CPU的状态，此时占用较大</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker stats</span>
</span></span><span class="line"><span class="cl">CONTAINER ID   NAME            CPU %     MEM USAGE / LIMIT     MEM %     NET I/O     BLOCK I/O         PIDS
</span></span><span class="line"><span class="cl">ab215f92c5d1   elasticsearch   173.32%   606.9MiB / 972.3MiB   62.42%    656B / 0B   2.56GB / 73.8MB   <span class="m">19</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>解决方式  增加内存的限制，修改配置文件  -e  环境配置修改</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 参数说明 设定最小是64M，最大是512M</span>
</span></span><span class="line"><span class="cl">docker run -d --name elasticsearch --net somenetwork -p 9200:9200 -p 9300:9300 -e <span class="s2">&#34;discovery.type=single-node&#34;</span> -e  <span class="nv">ES_JAVA_OPTS</span><span class="o">=</span><span class="s2">&#34;-Xms64m -Xmx512m&#34;</span> elasticsearch:7.6.2
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 查看CPU的状态 --- 发现占用率下降很多了</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker stats</span>
</span></span><span class="line"><span class="cl">CONTAINER ID   NAME            CPU %     MEM USAGE / LIMIT     MEM %     NET I/O         BLOCK I/O        PIDS
</span></span><span class="line"><span class="cl">1ac5d28a7744   elasticsearch   0.15%     394.7MiB / 972.3MiB   40.59%    1.25kB / 996B   214MB / 1.66MB   <span class="m">43</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="可视化工具">可视化工具</h2>
<h3 id="portainer">Portainer</h3>
<blockquote>
<p>Docker 图形化界面管理工具，提供一个后台面板供我们操作</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 启动Portainer</span>
</span></span><span class="line"><span class="cl">docker run -d -p 8088:9000 --name portainer <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>--restart<span class="o">=</span>always -v /var/run/docker.sock:/var/run/docker.sock --privileged<span class="o">=</span><span class="nb">true</span> portainer/portainer
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>浏览器访问http://ip+端口，获取如下页面，首次登录，需要创建用户名密码</p>
</blockquote>
<p><img src="/p/docker%E5%85%A5%E9%97%A8/portainer.png"
	width="1023"
	height="730"
	srcset="/p/docker%E5%85%A5%E9%97%A8/portainer_hu1aadedd77848c103f1bbf7c9c1dc71d5_51679_480x0_resize_box_3.png 480w, /p/docker%E5%85%A5%E9%97%A8/portainer_hu1aadedd77848c103f1bbf7c9c1dc71d5_51679_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="140"
		data-flex-basis="336px"
	
></p>
<blockquote>
<p>下一步，选择本地</p>
</blockquote>
<p><img src="/p/docker%E5%85%A5%E9%97%A8/local.png"
	width="1179"
	height="575"
	srcset="/p/docker%E5%85%A5%E9%97%A8/local_hu14728c156f9fc48ff38e2a6db7d0aa2e_50769_480x0_resize_box_3.png 480w, /p/docker%E5%85%A5%E9%97%A8/local_hu14728c156f9fc48ff38e2a6db7d0aa2e_50769_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="205"
		data-flex-basis="492px"
	
></p>
<blockquote>
<p>进入面板，即可看到详细信息，例如镜像数量，容器情况等</p>
</blockquote>
<p><img src="/p/docker%E5%85%A5%E9%97%A8/panel.png"
	width="1641"
	height="560"
	srcset="/p/docker%E5%85%A5%E9%97%A8/panel_hu52fe5111dbae524d12fd14654221052d_35834_480x0_resize_box_3.png 480w, /p/docker%E5%85%A5%E9%97%A8/panel_hu52fe5111dbae524d12fd14654221052d_35834_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="293"
		data-flex-basis="703px"
	
></p>
<h2 id="docker镜像详解">Docker镜像详解</h2>
<h3 id="镜像是什么">镜像是什么</h3>
<ul>
<li>是一种轻量化，可执行的独立软件包</li>
<li>用来打包软件运行环境和基于运行环境开发的软件</li>
<li>包括代码，运行时，库，环境变量和配置文件</li>
</ul>
<blockquote>
<p>所有的应用，直接打包docker镜像，就可以直接运行</p>
</blockquote>
<h3 id="docker镜像加载原理">Docker镜像加载原理</h3>
<blockquote>
<p>UnionFS（联合文件系统）</p>
</blockquote>
<ul>
<li>是一种分层，轻量级并且高性能的文件系统</li>
<li>一次同时加载多个文件系统，在外面看来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录</li>
</ul>
<blockquote>
<p>Docker镜像加载原理</p>
</blockquote>
<p>docker的镜像实际上由一层一层的文件系统组成，这种层次的文件系统就是UnionFS</p>
<p>bootfs主要包含bootloader和kernel,bootloader主要是引导加载Kernel,Linux刚启动会加载boofs文件系统，Docker容器的最底层就是bootfs,这一层与我们典型的Linux/Unix系统是一样的，包含boot加载器和内核。当boot加载完成之后整个内核就都在内存中了，此时内存的使用权已由bootfs转交给内核，此时系统也会卸载bootfs</p>
<p>rootfs，在bootfs之上，包含的就是典型Linux系统中的/dev,/proc,/bin,/etc等标准目录和文件，rootfs就是各种不同的操作系统发行版，比如Ubuntu,CentOs等等</p>
<p><img src="/p/docker%E5%85%A5%E9%97%A8/principle.png"
	width="899"
	height="337"
	srcset="/p/docker%E5%85%A5%E9%97%A8/principle_hu1d8d85a4bac22c80724316d3bc640918_163896_480x0_resize_box_3.png 480w, /p/docker%E5%85%A5%E9%97%A8/principle_hu1d8d85a4bac22c80724316d3bc640918_163896_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
	
		class="gallery-image" 
		data-flex-grow="266"
		data-flex-basis="640px"
	
></p>
<blockquote>
<p>平时我们安装进虚拟机的CentOs通常要几个G，为什么Docker这里的才200M</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker images centos</span>
</span></span><span class="line"><span class="cl">REPOSITORY   TAG       IMAGE ID       CREATED         SIZE
</span></span><span class="line"><span class="cl">centos       latest    5d0da3dc9764   <span class="m">16</span> months ago   231MB
</span></span></code></pre></td></tr></table>
</div>
</div><p>对于一个精简的OS，rootfs可以很小，只需要包含最基本的命令，工具和程序库就可以了，因为底层直接用Host的kernel,自己只需要提供rootfs就可以了。由此可见，对于不同的linux发行版，bootfs基本是一致的，只有rootfs有差别，所以它们可以公用bootfs</p>
<h2 id="分层理解">分层理解</h2>
<blockquote>
<p>分层的镜像</p>
</blockquote>
<p>我们可以去下载一个镜像，注意观察下载的日志输出，可以看到是一层一层的在下载</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker pull redis</span>
</span></span><span class="line"><span class="cl">Using default tag: latest
</span></span><span class="line"><span class="cl">latest: Pulling from library/redis
</span></span><span class="line"><span class="cl">a2abf6c4d29d: Already exists 
</span></span><span class="line"><span class="cl">c7a4e4382001: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">4044b9ba67c9: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">c8388a79482f: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">413c8bb60be2: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">1abfd3011519: Pull <span class="nb">complete</span> 
</span></span><span class="line"><span class="cl">Digest: sha256:db485f2e245b5b3329fdc7eff4eb00f913e09d8feb9ca720788059fdc2ed8339
</span></span><span class="line"><span class="cl">Status: Downloaded newer image <span class="k">for</span> redis:latest
</span></span><span class="line"><span class="cl">docker.io/library/redis:latest
</span></span></code></pre></td></tr></table>
</div>
</div><p>思考！为什么 Docker镜像要采用这种分层的结构呢？</p>
<p>最大的好处，莫过于是资源共享了，比如有多个镜像都从相同的base镜像构建而来，那么宿主机只需在磁盘上保留一份base镜像，同时内存中也只需要加载一份base镜像，这样就可以为所有的容器服务了，而且镜像的每一层都可以被共享</p>
<blockquote>
<p>使用 docker image inspect redis:latest  查看镜像的分层方式</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="s2">&#34;RootFS&#34;</span>: <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;Type&#34;</span>: <span class="s2">&#34;layers&#34;</span>,
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;Layers&#34;</span>: <span class="o">[</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sha256:2edcec3590a4ec7f40cf0743c15d78fb39d8326bc029073b41ef9727da6c851f&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sha256:9b24afeb7c2f21e50a686ead025823cd2c6e9730c013ca77ad5f115c079b57cb&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sha256:4b8e2801e0f956a4220c32e2c8b0a590e6f9bd2420ec65453685246b82766ea1&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sha256:529cdb636f61e95ab91a62a51526a84fd7314d6aab0d414040796150b4522372&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sha256:9975392591f2777d6bf4d9919ad1b2c9afa12f9a9b4d260f45025ec3cc9b18ed&#34;</span>,
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;sha256:8e5669d8329116b8444b9bbb1663dda568ede12d3dbcce950199b582f6e94952&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="o">]</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>,
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>特点</p>
</blockquote>
<p>Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部！</p>
<p>这一层就是我们通常说的容器层，容器之下都叫镜像层！</p>
<h2 id="commit镜像">commit镜像</h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">docker commit <span class="c1"># 提交容器成为一个新的副本</span>
</span></span><span class="line"><span class="cl">docker commit -m<span class="o">=</span><span class="s2">&#34;提交的描述信息&#34;</span> -a<span class="o">=</span><span class="s2">&#34;作者&#34;</span> 容器id 目标镜像名:<span class="o">[</span>TAG<span class="o">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl"><span class="c1"># 启动一个默认的tomcat</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker run -it -p 8080:8080 tomcat:9.0</span>
</span></span><span class="line"><span class="cl">Using CATALINA_BASE:   /usr/local/tomcat
</span></span><span class="line"><span class="cl">Using CATALINA_HOME:   /usr/local/tomcat
</span></span><span class="line"><span class="cl">Using CATALINA_TMPDIR: /usr/local/tomcat/temp
</span></span><span class="line"><span class="cl">Using JRE_HOME:        /usr/local/openjdk-11
</span></span><span class="line"><span class="cl">Using CLASSPATH:       /usr/local/tomcat/bin/bootstrap.jar:/usr/local/tomcat/bin/tomcat-juli.jar
</span></span><span class="line"><span class="cl">Using CATALINA_OPTS:   
</span></span><span class="line"><span class="cl">NOTE: Picked up JDK_JAVA_OPTIONS:  --add-opens<span class="o">=</span>java.base/java.lang<span class="o">=</span>ALL-UNNAMED --add-opens<span class="o">=</span>java.base/java.io<span class="o">=</span>ALL-UNNAMED --add-opens<span class="o">=</span>java.base/java.util<span class="o">=</span>ALL-UNNAMED --add-opens<span class="o">=</span>java.base/java.util.concurrent<span class="o">=</span>ALL-UNNAMED --add-opens<span class="o">=</span>java.rmi/sun.rmi.transport<span class="o">=</span>ALL-UNNAMED
</span></span><span class="line"><span class="cl">INFO <span class="o">[</span>main<span class="o">]</span> org.apache.catalina.startup.VersionLoggerListener.log Server version name:   Apache Tomcat/9.0.56
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 发现这个默认的tomcat 是没有webapps应用的 官方的镜像webapps目录下默认没有文件</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker ps</span>
</span></span><span class="line"><span class="cl">CONTAINER ID   IMAGE        COMMAND             CREATED          STATUS          PORTS          NAMES
</span></span><span class="line"><span class="cl">0a2f11347ef5   tomcat:9.0   <span class="s2">&#34;catalina.sh run&#34;</span>   <span class="m">11</span> minutes ago   Up <span class="m">10</span> minutes   0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   loving_nightingale
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker exec -it 0a2f11347ef5 /bin/bash</span>
</span></span><span class="line"><span class="cl">root@0a2f11347ef5:/usr/local/tomcat# <span class="nb">cd</span> webapps
</span></span><span class="line"><span class="cl">root@0a2f11347ef5:/usr/local/tomcat/webapps# ls
</span></span><span class="line"><span class="cl">root@0a2f11347ef5:/usr/local/tomcat/webapps#
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 将webapps.dist目录下的文件拷贝到webapps目录下</span>
</span></span><span class="line"><span class="cl">root@0a2f11347ef5:/usr/local/tomcat# cp -r webapps.dist/* webapps 
</span></span><span class="line"><span class="cl">root@0a2f11347ef5:/usr/local/tomcat# <span class="nb">cd</span> webapps
</span></span><span class="line"><span class="cl">root@0a2f11347ef5:/usr/local/tomcat/webapps# ls
</span></span><span class="line"><span class="cl">ROOT  docs  examples  host-manager  manager
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># 将我们操作过的这个容器通过commit提交为一个新的镜像，我们以后就使用这个镜像即可</span>
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker commit -a=&#34;satan&#34; -m=&#34;add webapps app&#34; 0a2f11347ef5 tomcat2:2.0</span>
</span></span><span class="line"><span class="cl">sha256:6ae624cd277319840b93a7208edb4f32cfb56dc03fd3e40db8b11f2af1e414d4
</span></span><span class="line"><span class="cl"><span class="o">[</span>root@docker ~<span class="o">]</span><span class="c1"># docker images</span>
</span></span><span class="line"><span class="cl">REPOSITORY            TAG       IMAGE ID       CREATED          SIZE
</span></span><span class="line"><span class="cl">tomcat2               2.0       6ae624cd2773   <span class="m">14</span> minutes ago   685MB
</span></span><span class="line"><span class="cl">nginx                 latest    605c77e624dd   <span class="m">12</span> months ago    141MB
</span></span><span class="line"><span class="cl">tomcat                9.0       b8e65a4d736d   <span class="m">13</span> months ago    680MB
</span></span><span class="line"><span class="cl">redis                 latest    7614ae9453d1   <span class="m">13</span> months ago    113MB
</span></span><span class="line"><span class="cl">centos                latest    5d0da3dc9764   <span class="m">16</span> months ago    231MB
</span></span><span class="line"><span class="cl">portainer/portainer   latest    580c0e4e98b0   <span class="m">22</span> months ago    79.1MB
</span></span><span class="line"><span class="cl">elasticsearch         7.6.2     f29a1ee41030   <span class="m">2</span> years ago      791MB
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="容器数据卷">容器数据卷</h2>
<h3 id="什么是容器数据卷">什么是容器数据卷</h3>
<p>回顾之前的不足</p>
<ul>
<li>我们的数据都在容器中，如果我们容器删除，数据就会丢失</li>
<li>mysql数据库中的数据，如果容器删掉了，重要数据无备份</li>
</ul>
<p>因此，有了新的需求</p>
<ul>
<li>数据可以持久化</li>
<li>mysql数据可以存储在本地</li>
</ul>
<p>解决方案</p>
<ul>
<li>容器之间有一个数据共享的技术，Docker容器中产生的数据，同步到本地</li>
</ul>
<blockquote>
<p>这就是卷技术！目录的挂载，将我们容器内的目录，挂载到Linux上面！</p>
</blockquote>

</section>


    <footer class="article-footer">
    

    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title">相关文章</h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/p/elasticsearch%E5%85%A5%E9%97%A8/">
        
        
            <div class="article-image">
                <img src="/p/elasticsearch%E5%85%A5%E9%97%A8/background.9390be11c25eec202479d382306b65e0_hua80d3c6f1bbf1e0f1d63b8e880a4887b_241267_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post ElasticSearch入门"
                        
                        data-hash="md5-k5C&#43;EcJe7CAkedOCMGtl4A==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">ElasticSearch入门</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/springcloud%E5%85%A5%E9%97%A8/">
        
        
            <div class="article-image">
                <img src="/p/springcloud%E5%85%A5%E9%97%A8/background.d8ea4d44084f85eaa21fb0ec75a48676_hufd682545f59d0350841f4e69d2319eef_543770_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post SpringCloud入门"
                        
                        data-hash="md5-2OpNRAhPheqiH7DsdaSGdg==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">SpringCloud入门</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/linux%E5%85%A5%E9%97%A8/">
        
        
            <div class="article-image">
                <img src="/p/linux%E5%85%A5%E9%97%A8/background.d064d68ed044ec0858e54a82b95a9301_hu17c71f546c30281edc50786cb15de534_125917_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Linux入门"
                        
                        data-hash="md5-0GTWjtBE7AhY5UqCuVqTAQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Linux入门</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%A5%E9%97%A8/">
        
        
            <div class="article-image">
                <img src="/p/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%85%A5%E9%97%A8/background.757de65f8a4b42f3a80e888c6ee9f3cd_hue324fec1f8d8395b7b28e0e32e0dc587_86513_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post 设计模式入门"
                        
                        data-hash="md5-dX3mX4pLQvOoDoiMbunzzQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">设计模式入门</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/p/zookeeper%E5%88%9D%E6%8E%A2/">
        
        
            <div class="article-image">
                <img src="/p/zookeeper%E5%88%9D%E6%8E%A2/background.73a130ee839b989ed645a4a6622e5250_hub1fdd9b6168bbde3eaa5087e4bf6af99_129657_250x150_fill_q75_box_smart1.jpg" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Zookeeper初探"
                        
                        data-hash="md5-c6Ew7oObmJ7WRaSmYi5SUA==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Zookeeper初探</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="wcq062821/blog_data"
        issue-term="pathname"
        
        label="none"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2022.12.04 创建
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
